<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf8" />
    <title>smoke-web</title>
    <script src="/smoke/reload"></script>
    <style>
      * { margin: 0px; padding: 0px; overflow: hidden; }
      body, html { width: 100%; height: 100%; }
      html { font-family: monospace; }
      a { color: lightgreen; text-decoration: none; }
      input { background: #222; color: #bbb; }
      .header { background: black; color: white; }
      .content { background: #333; color: white; }
      #container { width: 100%; height: 100%; }
      .breadcrumb { display: flex; flex-flow: row nowrap; white-space: nowrap; }
      .breadcrumb { margin-left: 16px; line-height: 48px; height: 48px; }
      .breadcrumb ul { display: flex; flex-flow: row nowrap; white-space: nowrap; }
      .breadcrumb ul li:before { content: ' / '; white-space: pre; display: inline-block; }
      .breadcrumb ul li { display: block; float: left; }
      .breadcrumb .last:before { content: ' / '; white-space: pre; display: inline-block; }
      .breadcrumb input { border: 0px; outline: none; font-family: monospace; }
      
      
      #directory { display: flex; flex-flow: column nowrap; width: 100%; height: 100%; }
      #directory .header { flex: 0 0 auto; height: 48px; width: 100%; }
      #directory .content { flex: 1 0 0px; min-height: 0px; width: 100%; overflow: hidden; }
      #directory .content .listing { margin: 16px; width: calc(100% - 32px); height: calc(100% - 32px); }
      #directory .content .listing ul { display: flex; flex-flow: column wrap; list-style: none; width: 100%; height: 100%; }
      #directory .content .listing li { width: 256px; height: 24px; line-height: 24px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      #directory .content .listing .directory-item:before { content: ''; height: 24px; width: 24px; float: left; }
      #directory .content .listing .file-item:before { content: ''; height: 24px; width: 24px; float: left; }
      #directory .content .listing .directory-item:before { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA00lEQVRIie2TPQ6CMBhAW2gjwsZonJhIWBxMiPEAHsDJK3hAwylkpQ7oxOJEoMBQWjdj4FMhGKe+pMvrz2uaFCGNZioYkkEQrFzXXVNKn05KifI8P8VxnE0OhOEmcpz5ruuFEGnTNEchRG8P5/zCGLt2PQGrWHmQJ4R4tm1H0JxlWZnv+9skSW6v3oAWf8IwDHBQShezmbPsrR8beA9GBHiPHwZgdOCfATU8oBROxx4vpSzKsrx3PfjR6prvMVYH0zQHHd62CFVVcWaMsbEX02i+8wB3uj8aHh1kVAAAAABJRU5ErkJggg==); }
      #directory .content .listing .file-item:before { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABbUlEQVRIie1TT0sCURycXbdFMaJLEp0k62IEnQo6RBTCQhD0GfoMURF06JQEdYwuHYQiim4FguQtCQ1CQlFJybSsBHPN9d+u+7p48+2uUrcceKeZ38xv3uMBPfxfxNPZICFE7OTE09lg1wGEkAjpHBEtH84oyOv1IplMUTmHYxSCIOjOGwZk8gVE069Ujh8YNBoHo0W0ajsVRYGqqlQNy7LgOA4AogzDTNA0hg3WNrfgu/FTOdfiAg723Lrzhg3ePvMoS1Wqpt9qwYhtCPhNg1AohMRTEgAw5pzEimse35UaiqKIZlNFJvehs2YHAZW6DLFSBwCUaw0AwJXPLx16TnfYPt4OAEpVyhn5tEHvH3jOLsTto5PjL7FEAo+J4tL67qyWD9t1cgu82YyXQvn98j7munZvBLR0mlcUST3L9mEblZNlGcGHWLag8ML+6nJYbxHN55mamRtnLdZpk6mda0glOXx3e65n3EMPf4cf/yTyAYsJT0sAAAAASUVORK5CYII=); }
      #not-found { display: flex; flex-flow: column nowrap; width: 100%; height: 100%; }
      #not-found .header { flex: 0 0 auto; height: 48px; width: 100%; }
      #not-found .content { flex: 1 0 0px; min-height: 0px; width: 100%; overflow: hidden; }
      #not-found .content .listing { margin: 16px; width: calc(100% - 32px); height: calc(100% - 32px); }
</style>
    <script>
      var FILES = [];
      var getDirectory = function () { return document.querySelector('#directory'); };
      var getFileList = function () { return document.querySelector('.listing ul'); };
      var getSearch = function () { return document.querySelector('#search'); };
      var readfiles = function () {
          var list = getFileList();
          for (var i = 0; i < list.children.length; i++) {
              var item = list.children[i];
              var anchor = item.querySelector('a');
              if (!item || !anchor) {
                  continue;
              }
              var className = item.getAttribute('class');
              var alt = anchor.getAttribute('alt');
              var href = anchor.getAttribute('href');
              var name_1 = anchor.innerHTML;
              FILES.push({ className: className, alt: alt, href: href, name: name_1 });
          }
      };
      var search = function () {
          var search = getSearch();
          var list = getFileList();
          var entries = FILES.filter(function (entry) { return entry.name.indexOf(search.value) !== -1; });
          var content = entries.map(function (entry) {
              return "<li class='" + entry.className + "'><a alt='" + entry.alt + "' href='" + entry.href + "'>" + entry.name + "</a></li>";
          });
          list.innerHTML = content.join('');
      };
      window.addEventListener('load', function () {
          if (getDirectory()) {
              getSearch().addEventListener('input', function () { return search(); });
              readfiles();
          }
      });
      
</script>
  </head>
  <body>
    <div id="container">
      <div id="directory">
        <div class='header'>
          <div class='breadcrumb'>
            <span>smoke-web</span>
            <ul>
              {{breadcrumb}}
              <!-- 
              <li><a href='#'>root</a></li>
              <li><a href='#'>styles</a></li>
              <li><a href='#'>script</a></li>
              -->
            </ul>
            <span class='last'><input id='search' type='text' placeholder=""></input></span>
          </div>
        </div>
        <div class='content'>
          <div class='listing'>
            <ul>
              {{listing}}
              <!-- 
              <li class='directory-item'><a href='#'>scripts</a></li>
              <li class='directory-item'><a href='#'>styles</a></li>
              <li class='directory-item'><a href='#'>images</a></li>
              <li class='file-item'><a href='#'>index.html</a></li>
              <li class='file-item'><a href='#'>about.html</a></li> 
             -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>